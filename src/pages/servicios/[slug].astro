---
// src/pages/servicios/[slug].astro
import Layout from '../../layouts/Layout.astro';
import serviciosData from '../../data/servicios.json';

// 1. Obtiene el slug de la URL actual (ej. 'seleccion-de-talento')
const slug = Astro.params.slug; 

// 2. Busca el servicio correspondiente en tu JSON
const servicio = serviciosData.serviciosEmpresa.find(s => s.slug === slug);

// 3. Comprobación de seguridad: Si no se encontró (y ocurre el error), redirigimos.
if (!servicio) {
    return Astro.redirect('/empresas');
}

// Nota: No necesitamos getStaticPaths() en este modo.
---
<Layout title={`Servicio: ${servicio.nombre}`}>
    <div class="container py-5">
        
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/empresas">Servicios</a></li>
                <li class="breadcrumb-item active" aria-current="page">{servicio.nombre}</li>
            </ol>
        </nav>

        <h1 class="display-4 fw-bold text-primary my-4">{servicio.nombre}</h1>
        
        <p class="fs-5 text-secondary">{servicio.descripcion}</p>
        
        <div class="mt-5 border p-4 rounded bg-light">
            <h3 class="fw-bold">¿Listo para Impulsar tu Talento?</h3>
            <p>Contáctanos hoy para solicitar una cotización detallada de este servicio.</p>
            <a href="/contacto" class="btn btn-warning btn-lg">Solicitar Cotización</a>
        </div>
    </div>
</Layout>